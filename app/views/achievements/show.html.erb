
<% if user_signed_in? && @achievement.user != current_user && current_user.is_teacher == true %>
  <% pre_like = @achievement.likes.find { |like| like.user_id == current_user.id} %>
  <% if pre_like %>
    <%= button_to 'Reject', achievement_like_path(@achievement, pre_like), method: :delete %>
  <% else %>
    <%= button_to 'Confirm', achievement_likes_path(@achievement), method: :post %>
  <% end %>
<% end %>

<h5 class="card-title d-flex justify-content-between mb-4">
  <span><%= @achievement.title%></span>
  <div>
    <% if user_signed_in? && @achievement.user == current_user%>
      <%= button_to "Destroy this achievement", @achievement, method: :delete, class: 'btn btn-outline-danger'%>
    <% end %>
  </div>
</h5>

<p>
  <strong>Description:</strong>
  <%= @achievement.description %>
</p>

<% if @achievement.likes.count != 0 %>
  <strong><%= (@achievement.likes.count) == 1 ? 'Approve:' : 'Approves:'%></strong>
  <% approves = @achievement.likes.all { |like| like.achievement_id == @achievement.id} %>
  <% approves.each do |approve| %>
    <p>
      <%= User.find(approve.user_id).name%>
    </p>
  <% end %>
<%end %>

<% if user_signed_in? && @achievement.user == current_user%>
  <%= link_to "Back", myprofile_path%>
<%elsif @achievement.user.is_teacher?%>
  <%= link_to "Back", teacher_path(@achievement.user)%>
<% else %>
  <%= link_to "Back", student_path(@achievement.user)%>
<% end %>
